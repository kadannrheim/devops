## Часто используемые команды PSQL

### Для просмотра структуры:
| Команда | Описание |
|---------|----------|
| `\d` | Список таблиц, представлений, последовательностей |
| `\dt` | Только таблицы |
| `\dv` | Только представления (views) |
| `\ds` | Только последовательности (sequences) |
| `\df` | Только функции |
| `\d+` | Подробная информация с дополнительными деталями |
| `\d table_name` | Структура конкретной таблицы |
| `\d+ table_name` | Подробная структура таблицы с размерами |

### Для работы с БД:
| Команда | Описание |
|---------|----------|
| `\l` | Список всех баз данных |
| `\c dbname` | Подключение к другой базе данных |
| `\dn` | Список схем (schemas) |

### Для выполнения операций:
| Команда | Описание |
|---------|----------|
| `\i file.sql` | Выполнить SQL из файла |
| `\o file.txt` | Вывод результатов в файл |
| `\timing` | Включить/выключить тайминг запросов |

### Для информации и настроек:
| Команда | Описание |
|---------|----------|
| `\x` | Переключить расширенный/обычный формат вывода |
| `\s` | Показать историю команд |
| `\?` | Справка по командам PSQL |
| `\q` | Выйти из PSQL |


# Резервное копирование 
Для создания резервной копии БД в PostgreSQL есть несколько способов:

## Способ 1: pg_dump (рекомендуемый)
```bash
# Резервная копия одной БД
pg_dump -h 192.168.1.126 -p 5432 -U ваш_пользователь -d main_db -Fc -f backup_main_db.dump

# Резервная копия всех БД
pg_dumpall -h 192.168.1.126 -p 5432 -U ваш_пользователь -f all_databases_backup.sql
```

## Способ 2: Через DBeaver (графический)
1. **Правой кнопкой** на БД `main_db`
2. **Tools** → **Backup**
3. Выберите формат (Custom, Plain, Tar)
4. Укажите путь для сохранения
5. **Start**

## Способ 3: Резервное копирование через SQL
```sql
-- Блокировка БД для согласованной копии (опционально)
BEGIN;
-- Ваши операции с данными
COMMIT;
```

## Параметры pg_dump:
- `-h` - хост
- `-p` - порт  
- `-U` - пользователь
- `-d` - база данных
- `-Fc` - custom format (сжатый)
- `-Fp` - plain text (SQL)
- `-f` - файл для сохранения

## Восстановление из резервной копии:
```bash
# Восстановление
pg_restore -h localhost -U ваш_пользователь -d main_db backup_main_db.dump

# Или для SQL файла
psql -h localhost -U ваш_пользователь -d main_db -f backup_file.sql
```

**Рекомендую использовать pg_dump с форматом Custom (-Fc)** - он создает сжатые файлы и сохраняет все объекты БД.