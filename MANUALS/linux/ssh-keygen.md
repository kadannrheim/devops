# Генерация ключей

Создание SSH-ключа с помощью утилиты `ssh-keygen` — это стандартный способ генерации пары ключей (приватного и публичного) для аутентификации по SSH. Вот пошаговая инструкция:

---

### 1. **Запусти команду `ssh-keygen`**
Открой терминал и выполни команду:

```bash
ssh-keygen -t ed25519 -C "your_email@example.com"
```

- **`-t ed25519`** — указывает тип ключа. `ed25519` — это современный и безопасный алгоритм. Если твоя система не поддерживает `ed25519`, используй `rsa`:
  ```bash
  ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
  ```
  Здесь `-b 4096` указывает длину ключа (4096 бит для RSA).
- **`-C "your_email@example.com"`** — это комментарий, который будет добавлен в конец публичного ключа. Обычно используется твой email.

---

### 2. **Укажи путь для сохранения ключей**
После запуска команды `ssh-keygen` тебе будет предложено указать путь для сохранения ключей. По умолчанию ключи сохраняются в папке `~/.ssh/` с именами `id_ed25519` (или `id_rsa` для RSA).

Пример вывода:
```
Generating public/private ed25519 key pair.
Enter file in which to save the key (/home/username/.ssh/id_ed25519):
```

- Нажми `Enter`, чтобы сохранить ключи в папке по умолчанию.
- Если ты хочешь указать другой путь, введи его вручную.

---

### 3. **Задай парольную фразу (опционально)**
Далее тебе будет предложено задать парольную фразу (passphrase) для защиты ключа:

```
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
```

- Парольная фраза добавляет дополнительный уровень безопасности. Если ты не хочешь использовать пароль, просто нажми `Enter`.
- Если ты задашь парольную фразу, её нужно будет вводить каждый раз при использовании ключа.

---

### 4. **Ключи созданы**
После завершения процесса ты увидишь сообщение:

```
Your identification has been saved in /home/username/.ssh/id_ed25519
Your public key has been saved in /home/username/.ssh/id_ed25519.pub
The key fingerprint is:
SHA256:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX your_email@example.com
The key's randomart image is:
+--[ED25519 256]--+
|        .o.      |
|       .o .      |
|      . .  .     |
|       . .  .    |
|        S .  .   |
|         .  . .  |
|          .  . . |
|           . . . |
|            Eo.  |
+----[SHA256]-----+
```

---

### 5. **Где находятся ключи?**
- **Приватный ключ:** `~/.ssh/id_ed25519` (или `~/.ssh/id_rsa`).
- **Публичный ключ:** `~/.ssh/id_ed25519.pub` (или `~/.ssh/id_rsa.pub`).

---

### 6. **Добавь ключ в SSH-агент**
Чтобы не вводить парольную фразу каждый раз, добавь ключ в SSH-агент:

1. Запусти SSH-агент:
   ```bash
   eval "$(ssh-agent -s)"
   ```

2. Добавь приватный ключ:
   ```bash
   ssh-add ~/.ssh/id_ed25519
   ```

   Если ты задал парольную фразу, тебе будет предложено ввести её.

---

### 7. **Использование SSH-ключа**
- **Для GitHub/GitLab:** Скопируй содержимое публичного ключа (`~/.ssh/id_ed25519.pub`) и добавь его в настройках своего аккаунта:
  - GitHub: **Settings** → **SSH and GPG keys** → **New SSH key**.
  - GitLab: **User Settings** → **SSH Keys**.
- **Для серверов:** Добавь публичный ключ в файл `~/.ssh/authorized_keys` на удалённом сервере.

---

### 8. **Проверка подключения**
Чтобы проверить, что ключ работает, выполни команду:

```bash
ssh -T git@github.com
```

Для GitHub ты увидишь сообщение:
```
Hi username! You've successfully authenticated, but GitHub does not provide shell access.
```

---

### 9. **Дополнительные команды**
- **Просмотр публичного ключа:**
  ```bash
  cat ~/.ssh/id_ed25519.pub
  ```
- **Проверка существующих ключей:**
  ```bash
  ls -al ~/.ssh
  ```

---
